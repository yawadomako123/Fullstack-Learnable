## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–∏—Ç–∏–∫–∏

–ü–æ—Å–∫–æ–ª—å–∫—É Q-—Ç–∞–±–ª–∏—Ü–∞ –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç "–ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å" –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –≤ –∫–∞–∂–¥–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –¥–æ–≤–æ–ª—å–Ω–æ –ª–µ–≥–∫–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤ –Ω–∞—à–µ–º –º–∏—Ä–µ. –í —Å–∞–º–æ–º –ø—Ä–æ—Å—Ç–æ–º —Å–ª—É—á–∞–µ –º—ã –º–æ–∂–µ–º –≤—ã–±—Ä–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –Ω–∞–∏–≤—ã—Å—à–µ–º—É –∑–Ω–∞—á–µ–Ω–∏—é –≤ Q-—Ç–∞–±–ª–∏—Ü–µ: (–∫–æ–¥–æ–≤—ã–π –±–ª–æ–∫ 9)

```python
def qpolicy_strict(m):
        x,y = m.human
        v = probs(Q[x,y])
        a = list(actions)[np.argmax(v)]
        return a

walk(m,qpolicy_strict)
```

> –ï—Å–ª–∏ –≤—ã –ø–æ–ø—Ä–æ–±—É–µ—Ç–µ –∫–æ–¥ –≤—ã—à–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ –∏–Ω–æ–≥–¥–∞ –æ–Ω "–≤–∏—Å–Ω–µ—Ç", –∏ –≤–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –û–°–¢–ê–ù–û–í–ò–¢–¨ –≤ –±–ª–æ–∫–Ω–æ—Ç–µ, —á—Ç–æ–±—ã –ø—Ä–µ—Ä–≤–∞—Ç—å –µ–≥–æ. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –¥–≤–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è "—É–∫–∞–∑—ã–≤–∞—é—Ç" –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ Q-–∑–Ω–∞—á–µ–Ω–∏—è, –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∞–≥–µ–Ω—Ç—ã –±—É–¥—É—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –º–µ–∂–¥—É —ç—Ç–∏–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏.

## üöÄ–ó–∞–¥–∞—á–∞

> **–ó–∞–¥–∞—á–∞ 1:** –ò–∑–º–µ–Ω–∏—Ç–µ `walk` function to limit the maximum length of path by a certain number of steps (say, 100), and watch the code above return this value from time to time.

> **Task 2:** Modify the `walk` function so that it does not go back to the places where it has already been previously. This will prevent `walk` from looping, however, the agent can still end up being "trapped" in a location from which it is unable to escape.

## Navigation

A better navigation policy would be the one that we used during training, which combines exploitation and exploration. In this policy, we will select each action with a certain probability, proportional to the values in the Q-Table. This strategy may still result in the agent returning back to a position it has already explored, but, as you can see from the code below, it results in a very short average path to the desired location (remember that `print_statistics`, —á—Ç–æ–±—ã –æ–Ω –∑–∞–ø—É—Å–∫–∞–ª —Å–∏–º—É–ª—è—Ü–∏—é 100 —Ä–∞–∑): (–∫–æ–¥–æ–≤—ã–π –±–ª–æ–∫ 10)

```python
def qpolicy(m):
        x,y = m.human
        v = probs(Q[x,y])
        a = random.choices(list(actions),weights=v)[0]
        return a

print_statistics(qpolicy)
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –∫–æ–¥–∞ –≤—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—å—à—É—é —Å—Ä–µ–¥–Ω—é—é –¥–ª–∏–Ω—É –ø—É—Ç–∏, —á–µ–º —Ä–∞–Ω—å—à–µ, –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 3-6.

## –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è

–ö–∞–∫ –º—ã —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–∏, –ø—Ä–æ—Ü–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –∑–Ω–∞–Ω–∏–π –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –ø—Ä–æ–±–ª–µ–º. –ú—ã –≤–∏–¥–µ–ª–∏, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—É—á–µ–Ω–∏—è (—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ–º–æ—á—å –∞–≥–µ–Ω—Ç—É –Ω–∞–π—Ç–∏ –∫–æ—Ä–æ—Ç–∫–∏–π –ø—É—Ç—å –∫ —Ü–µ–ª–∏) —É–ª—É—á—à–∏–ª–∏—Å—å, –Ω–æ —Ç–∞–∫–∂–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –Ω–∞–±–ª—é–¥–∞—Ç—å, –∫–∞–∫ –≤–µ–¥–µ—Ç —Å–µ–±—è —Å—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ –ø—É—Ç–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—É—á–µ–Ω–∏—è:

–ò–∑—É—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –æ–±–æ–±—â–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

- **–°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ –ø—É—Ç–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è**. –ß—Ç–æ –º—ã –≤–∏–¥–∏–º –∑–¥–µ—Å—å, —Ç–∞–∫ —ç—Ç–æ —Ç–æ, —á—Ç–æ —Å–Ω–∞—á–∞–ª–∞ —Å—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ –ø—É—Ç–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è. –≠—Ç–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ, —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ, –∫–æ–≥–¥–∞ –º—ã –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ–º –æ–± –æ–∫—Ä—É–∂–µ–Ω–∏–∏, –º—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ, –∑–∞—Å—Ç—Ä—è–Ω–µ–º –≤ –ø–ª–æ—Ö–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ –≤–æ–¥–∞ –∏–ª–∏ –≤–æ–ª–∫. –ü–æ –º–µ—Ä–µ —Ç–æ–≥–æ –∫–∞–∫ –º—ã —É–∑–Ω–∞–µ–º –±–æ–ª—å—à–µ –∏ –Ω–∞—á–∏–Ω–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –∑–Ω–∞–Ω–∏—è, –º—ã –º–æ–∂–µ–º –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–æ–ª—å—à–µ, –Ω–æ –≤—Å–µ –µ—â–µ –Ω–µ –∑–Ω–∞–µ–º, –≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è —è–±–ª–æ–∫–∏.

- **–î–ª–∏–Ω–∞ –ø—É—Ç–∏ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –ø–æ –º–µ—Ä–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞–Ω–∏–π**. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –º—ã —É–∑–Ω–∞–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –∞–≥–µ–Ω—Ç—É —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª–µ–≥—á–µ –¥–æ—Å—Ç–∏—á—å —Ü–µ–ª–∏, –∏ –¥–ª–∏–Ω–∞ –ø—É—Ç–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç —É–º–µ–Ω—å—à–∞—Ç—å—Å—è. –û–¥–Ω–∞–∫–æ –º—ã –≤—Å–µ –µ—â–µ –æ—Ç–∫—Ä—ã—Ç—ã –∫ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è–º, –ø–æ—ç—Ç–æ–º—É –º—ã —á–∞—Å—Ç–æ –æ—Ç–∫–ª–æ–Ω—è–µ–º—Å—è –æ—Ç –ª—É—á—à–µ–≥–æ –ø—É—Ç–∏ –∏ –∏—Å—Å–ª–µ–¥—É–µ–º –Ω–æ–≤—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—É—Ç—å –¥–ª–∏–Ω–Ω–µ–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ.

- **–î–ª–∏–Ω–∞ —Ä–µ–∑–∫–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è**. –ß—Ç–æ –º—ã —Ç–∞–∫–∂–µ –Ω–∞–±–ª—é–¥–∞–µ–º –Ω–∞ —ç—Ç–æ–º –≥—Ä–∞—Ñ–∏–∫–µ, —Ç–∞–∫ —ç—Ç–æ —Ç–æ, —á—Ç–æ –≤ –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç –¥–ª–∏–Ω–∞ —Ä–µ–∑–∫–æ —É–≤–µ–ª–∏—á–∏–ª–∞—Å—å. –≠—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ç–æ—Ö–∞—Å—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–∏—Ä–æ–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏ –Ω–∞ —Ç–æ, —á—Ç–æ –≤ –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç –º—ã –º–æ–∂–µ–º "–∏—Å–ø–æ—Ä—Ç–∏—Ç—å" –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã Q-—Ç–∞–±–ª–∏—Ü—ã, –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—è –∏—Ö –Ω–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏. –≠—Ç–æ, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –¥–æ–ª–∂–Ω–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø—É—Ç–µ–º —É–º–µ–Ω—å—à–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ–±—É—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∫–æ–Ω—Ü–µ –æ–±—É—á–µ–Ω–∏—è –º—ã –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è Q-—Ç–∞–±–ª–∏—Ü—ã –ª–∏—à—å –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ).

–í —Ü–µ–ª–æ–º, –≤–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ —É—Å–ø–µ—Ö –∏ –∫–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è, —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ–±—É—á–µ–Ω–∏—è –∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–∏—Å–∫–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç **–≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏**, —á—Ç–æ–±—ã –æ—Ç–ª–∏—á–∏—Ç—å –∏—Ö –æ—Ç **–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—É—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã Q-—Ç–∞–±–ª–∏—Ü—ã). –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–∏—Å–∫–∞ –ª—É—á—à–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**, –∏ –µ–º—É —Å–ª–µ–¥—É–µ—Ç —É–¥–µ–ª–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–µ–º—É.

## [–ü–æ—Å—Ç-–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç](https://gray-sand-07a10f403.1.azurestaticapps.net/quiz/46/)

## –ó–∞–¥–∞–Ω–∏–µ 
[–ë–æ–ª–µ–µ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ú–∏—Ä](assignment.md)

**–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**:  
–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –±—ã–ª –ø–µ—Ä–µ–≤–µ–¥–µ–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∞—à–∏–Ω–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥—á–µ—Å–∫–∏—Ö —É—Å–ª—É–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ò–ò. –•–æ—Ç—è –º—ã —Å—Ç—Ä–µ–º–∏–º—Å—è –∫ —Ç–æ—á–Ω–æ—Å—Ç–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏–º–µ–π—Ç–µ –≤ –≤–∏–¥—É, —á—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—à–∏–±–∫–∏ –∏–ª–∏ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏. –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ —Ä–æ–¥–Ω–æ–º —è–∑—ã–∫–µ —Å–ª–µ–¥—É–µ—Ç —Å—á–∏—Ç–∞—Ç—å –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º. –î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥. –ú—ã –Ω–µ –Ω–µ—Å–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ª—é–±—ã–µ –Ω–µ–¥–æ—Ä–∞–∑—É–º–µ–Ω–∏—è –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ç–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞.